<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üéÑ Christmas Movie Zoom Quiz üéÑ</title>

<style>
  body{
    margin:0;
    font-family: system-ui, Arial, sans-serif;
    background: radial-gradient(circle at top, #0a3d62, #02101f);
    color:#fff;
    text-align:center;
    min-height:100vh;
  }
  .container{
    max-width: 980px;
    margin: 0 auto;
    padding: 16px;
  }
  h1{
    font-size: clamp(34px, 6vw, 56px);
    margin: 12px 0 10px;
    color:#FFD700;
    text-shadow: 0 0 18px #ff0000;
  }
  #intro, #results{
    background: rgba(0,0,0,.60);
    border: 3px solid #FFD700;
    border-radius: 20px;
    padding: 22px 18px;
    box-shadow: 0 0 24px rgba(255,0,0,.25);
  }
  #intro p{
    font-size: clamp(18px, 2.7vw, 22px);
    line-height: 1.35;
    margin: 10px 0;
  }
  #start-btn{
    font-size: clamp(20px, 4vw, 28px);
    padding: 18px 28px;
    border-radius: 18px;
    border: 4px solid #FFD700;
    background: linear-gradient(#2ecc71,#1c7c31);
    color:#fff;
    cursor:pointer;
    width: min(420px, 92%);
  }

  #quiz.hidden, #intro.hidden, #results.hidden { display:none; }

  .image-container{
    position: relative;
    width: min(92vw, 760px);
    aspect-ratio: 4 / 3;
    margin: 14px auto 10px;
    overflow: hidden;
    border: 8px solid #FFD700;
    border-radius: 20px;
    background:#000;
    box-shadow: 0 0 22px rgba(255,255,255,.18);
  }
  #movie-image{
    position:absolute;
    top:50%;
    left:50%;
    max-width: 175%;
    max-height: 175%;
    transform: translate(-50%, -50%) scale(10);
    transition: transform 0.6s ease;
    filter: grayscale(100%);
  }
  .color #movie-image{ filter:none; }

  .hud{
    display:flex;
    gap:10px;
    justify-content:center;
    align-items:center;
    flex-wrap:wrap;
    margin: 8px 0 6px;
  }
  #zoom-btn{
    padding: 12px 18px;
    font-size: 18px;
    border-radius: 14px;
    border: 3px solid #FFD700;
    background: linear-gradient(#3498db,#1f6ea6);
    color:#fff;
    cursor:pointer;
    width: min(260px, 92%);
  }
  #zoom-btn:disabled{
    opacity:.6;
    cursor: default;
  }
  #score{
    font-size: 18px;
    padding: 10px 14px;
    border-radius: 14px;
    border: 3px solid #FFD700;
    background: rgba(0,0,0,.5);
    min-width: 220px;
  }

  .options{
    width: min(92vw, 760px);
    margin: 10px auto 0;
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
  .option{
    padding: 14px 12px;
    font-size: 17px;
    border-radius: 16px;
    border: 3px solid #FFD700;
    background: rgba(255,255,255,.95);
    color:#000;
    cursor:pointer;
    transition: transform .08s ease;
  }
  .option:active{ transform: scale(0.99); }
  .option.correct{ background: linear-gradient(#2ecc71,#1c7c31); color:#fff; border-color:#2ecc71; }
  .option.incorrect{ background: linear-gradient(#e74c3c,#9b2d23); color:#fff; border-color:#ff4444; }
  .option:disabled{ opacity:.85; cursor: default; }

  #overlay{
    position:absolute;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    background: rgba(0,0,0,.75);
    flex-direction:column;
    gap: 10px;
    padding: 16px;
  }
  #overlay-text{
    font-size: clamp(20px, 4.5vw, 34px);
    color:#FFD700;
    text-shadow: 0 0 10px #ff0000;
  }
  #countdown{
    font-size: clamp(44px, 10vw, 76px);
    color:#fff;
  }

  #results h2{
    font-size: clamp(26px, 5vw, 44px);
    margin: 0 0 10px;
    color:#FFD700;
    text-shadow: 0 0 16px #ff0000;
  }
  #results p{
    font-size: clamp(18px, 3.2vw, 26px);
    margin: 0;
  }

  @media (max-width: 640px){
    .options{ grid-template-columns: 1fr; }
  }
</style>
</head>

<body>
<div class="container">
  <h1>üéÑ Christmas Movie Zoom Quiz üéÑ</h1>

  <div id="intro">
    <p>
      üéØ Start with <b>10 points</b><br/>
      üîç Zoom out: <b>‚àí1</b><br/>
      ‚ùå Wrong guess: <b>‚àí2</b> and zooms out 1 level<br/>
      üîÅ Keep guessing until points hit 0<br/>
      ‚úÖ Correct guess earns remaining points<br/>
      üé≤ Each game uses <b>25 random movies</b> (no repeats)
    </p>
    <button id="start-btn">üéÖ Start Game</button>
  </div>

  <div id="quiz" class="hidden">
    <div class="image-container" id="image-container">
      <img id="movie-image" alt="Movie scene" />
      <div id="overlay">
        <div id="overlay-text"></div>
        <div id="countdown"></div>
      </div>
    </div>

    <div class="hud">
      <button id="zoom-btn">Zoom Out</button>
      <div id="score"></div>
    </div>

    <div class="options" id="options"></div>
  </div>

  <div id="results" class="hidden"></div>
</div>

<script>
/* ========= Image URLs (EXACTLY as you provided, in order) ========= */
const imageLinks = [
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a0.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a1.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a2.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a3.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a4.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a5.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a6.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a7.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a8.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a9.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b0.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b1.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b2.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b3.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b4.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b5.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b6.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b7.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b8.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b9.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c0.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c1.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c2.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c3.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c4.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c5.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c6.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c7.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c8.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c9.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d0.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d1.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d2.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d3.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d4.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d5.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d6.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d7.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d8.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d9.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e0.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e1.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e2.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e3.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e4.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e5.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e6.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e7.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e8.png",
  "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e9.png"
];

/* ========= Movie list (50 entries). Images are assigned by index to imageLinks above. ========= */
/* NOTE: Titles/years kept as previously defined in your game. Only image links were the issue. */
const movieData = [
  { title:"Elf", year:2003 },
  { title:"Home Alone 2: Lost in New York", year:1992 },
  { title:"Rudolph The Red-Nosed Reindeer", year:1964 },
  { title:"A Christmas Story", year:1983 },
  { title:"Nightmare Before Christmas", year:1993 },
  { title:"The Santa Clause", year:1994 },
  { title:"Frosty the Snowman", year:1969 },
  { title:"The Year Without a Santa Claus", year:1974 },
  { title:"Jack Frost", year:1998 },
  { title:"White Christmas", year:1954 },
  { title:"Jingle All the Way", year:1996 },
  { title:"Prancer", year:1989 },
  { title:"Scrooged", year:1988 },
  { title:"Christmas with the Kranks", year:2004 },
  { title:"Deck the Halls", year:2006 },
  { title:"Just Friends", year:2005 },
  { title:"Ernest Saves Christmas", year:1988 },
  { title:"Mr. Magoo's Christmas Carol", year:1962 },
  { title:"It's A Wonderful Life", year:1946 },
  { title:"National Lampoon's Christmas Vacation", year:1989 },
  { title:"Miracle on 34th Street", year:1994 },
  { title:"How the Grinch Stole Christmas", year:2000 },
  { title:"A Charlie Brown Christmas", year:1965 },
  { title:"Santa Claus is Coming to Town", year:1970 },
  { title:"Batman Begins", year:2005 },
  { title:"The Muppet Christmas Carol", year:1992 },
  { title:"The Holiday", year:2006 },
  { title:"Home Alone", year:1990 },
  { title:"The Small One", year:1978 },
  { title:"Mickey's Once Upon a Christmas", year:1999 },
  { title:"The Polar Express", year:2004 },
  { title:"Love Actually", year:2003 },
  { title:"Die Hard", year:1988 },
  { title:"Bad Santa", year:2003 },
  { title:"Arthur Christmas", year:2011 },
  { title:"Klaus", year:2019 },
  { title:"The Christmas Chronicles", year:2018 },
  { title:"Gremlins", year:1984 },
  { title:"Fred Claus", year:2007 },
  { title:"The Family Man", year:2000 },
  { title:"Four Christmases", year:2008 },
  { title:"The Preacher's Wife", year:1996 },
  { title:"I'll Be Home for Christmas", year:1998 },
  { title:"Noelle", year:2019 },
  { title:"Spirited", year:2022 },
  { title:"Violent Night", year:2022 },
  { title:"8-Bit Christmas", year:2021 },
  { title:"The Christmas Setup", year:2020 },
  { title:"Happiest Season", year:2020 },
  { title:"Last Christmas", year:2019 }
].map((m, i) => ({ ...m, image: imageLinks[i] }));

/* ========= Core game ========= */
const introEl = document.getElementById("intro");
const quizEl = document.getElementById("quiz");
const resultsEl = document.getElementById("results");

const imageContainer = document.getElementById("image-container");
const imgEl = document.getElementById("movie-image");
const optionsEl = document.getElementById("options");
const zoomBtn = document.getElementById("zoom-btn");
const scoreEl = document.getElementById("score");

const overlayEl = document.getElementById("overlay");
const overlayTextEl = document.getElementById("overlay-text");
const countdownEl = document.getElementById("countdown");

const vibrate = (pattern) => { try { if (navigator.vibrate) navigator.vibrate(pattern); } catch {} };
const shuffle = (arr) => [...arr].sort(() => Math.random() - 0.5);

let selectedMovies = [];
let qIndex = 0;
let zoomLevel = 0;     // 0..9
let points = 10;
let totalScore = 0;

// focal movement state + bias
let offsetX = 0, offsetY = 0;
let lastX = 0, lastY = 0;

function updateHUD() {
  scoreEl.textContent = `Possible: ${points} point${points === 1 ? "" : "s"} | Zooms left: ${Math.max(0, 9 - zoomLevel)}`;
  zoomBtn.disabled = (points <= 0 || zoomLevel >= 9);
  zoomBtn.textContent = zoomBtn.disabled ? "Fully Revealed" : "Zoom Out";
}

function applyTransform() {
  const scale = Math.max(1, 10 - zoomLevel);
  imgEl.style.transform = `translate(-50%, -50%) translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
}

function randomOffsetWithDirectionalBias() {
  // Big moves early; a bit calmer late.
  const maxShift = 220 - zoomLevel * 14;    // px
  const minDist  = 140 - zoomLevel * 10;   // px

  let tries = 0;
  let nx, ny;

  do {
    nx = (Math.random() * 2 - 1) * maxShift;
    ny = (Math.random() * 2 - 1) * maxShift;
    tries++;
  } while (Math.hypot(nx - lastX, ny - lastY) < Math.max(40, minDist) && tries < 40);

  offsetX = nx; offsetY = ny;
  lastX = nx; lastY = ny;
}

function setColorMode(on) {
  if (on) imageContainer.classList.add("color");
  else imageContainer.classList.remove("color");
}

function showOverlay(text) {
  overlayTextEl.textContent = text;
  countdownEl.textContent = "";
  overlayEl.style.display = "flex";
}

function hideOverlay() {
  overlayEl.style.display = "none";
  overlayTextEl.textContent = "";
  countdownEl.textContent = "";
}

function startCountdownAndAdvance(message) {
  showOverlay(message);
  let c = 3;
  countdownEl.textContent = c;

  const timer = setInterval(() => {
    c--;
    countdownEl.textContent = c;
    if (c <= 0) {
      clearInterval(timer);
      nextQuestion();
    }
  }, 1000);
}

function buildOptions(correctMovie) {
  optionsEl.innerHTML = "";

  const pool = movieData.filter(m => m !== correctMovie);
  const distractors = shuffle(pool).slice(0, 7);
  const choices = shuffle([correctMovie, ...distractors]);

  choices.forEach(choice => {
    const btn = document.createElement("button");
    btn.className = "option";
    btn.textContent = choice.title;
    btn.addEventListener("click", () => handleGuess(btn, choice === correctMovie, correctMovie));
    optionsEl.appendChild(btn);
  });
}

function disableAllOptions() {
  document.querySelectorAll(".option").forEach(b => b.disabled = true);
}

function handleGuess(btn, isCorrect, correctMovie) {
  if (btn.disabled || points <= 0) return;

  if (isCorrect) {
    btn.classList.add("correct");
    vibrate([40, 40, 80]);
    totalScore += points;

    // reveal fully + color
    zoomLevel = 9;
    randomOffsetWithDirectionalBias();
    applyTransform();
    setColorMode(true);
    updateHUD();

    disableAllOptions();
    zoomBtn.disabled = true;

    startCountdownAndAdvance(`‚úÖ Correct! +${points} point${points === 1 ? "" : "s"}`);
    return;
  }

  // incorrect: -2 points and zoom out 1 level, but allow more guesses
  btn.classList.add("incorrect");
  btn.disabled = true;
  vibrate([100, 50, 100]);

  points = Math.max(0, points - 2);
  zoomLevel = Math.min(9, zoomLevel + 1);
  randomOffsetWithDirectionalBias();
  applyTransform();

  if (zoomLevel >= 8) setColorMode(true);
  updateHUD();

  if (points <= 0) {
    // reveal answer and move on
    zoomLevel = 9;
    randomOffsetWithDirectionalBias();
    applyTransform();
    setColorMode(true);
    updateHUD();

    disableAllOptions();
    zoomBtn.disabled = true;

    startCountdownAndAdvance(`üßæ Answer: ${correctMovie.title}`);
  }
}

function zoomOutAction(correctMovie) {
  if (points <= 0 || zoomLevel >= 9) return;

  vibrate(30);
  points = Math.max(0, points - 1);
  zoomLevel = Math.min(9, zoomLevel + 1);

  randomOffsetWithDirectionalBias();
  applyTransform();

  if (zoomLevel >= 8) setColorMode(true);
  updateHUD();

  if (points <= 0) {
    // reveal answer and move on
    zoomLevel = 9;
    randomOffsetWithDirectionalBias();
    applyTransform();
    setColorMode(true);
    updateHUD();

    disableAllOptions();
    zoomBtn.disabled = true;

    startCountdownAndAdvance(`üßæ Answer: ${correctMovie.title}`);
  }
}

function loadQuestion() {
  hideOverlay();
  setColorMode(false);

  zoomLevel = 0;
  points = 10;
  offsetX = offsetY = lastX = lastY = 0;

  const movie = selectedMovies[qIndex];
  imgEl.src = movie.image;

  // When image loads, do first transform so it doesn't flash centered.
  imgEl.onload = () => {
    randomOffsetWithDirectionalBias();
    applyTransform();
  };

  buildOptions(movie);
  updateHUD();

  zoomBtn.onclick = () => zoomOutAction(movie);
}

function nextQuestion() {
  qIndex++;
  if (qIndex < selectedMovies.length) {
    loadQuestion();
  } else {
    showResults();
  }
}

function showResults() {
  quizEl.classList.add("hidden");
  resultsEl.classList.remove("hidden");

  resultsEl.innerHTML = `
    <h2>üéâ Final Score üéâ</h2>
    <p>You scored <b>${totalScore}</b> points out of a max of 250.</p>
    <p style="margin-top:10px; font-size:18px; opacity:.9;">
      Refresh to play again (or don‚Äôt, and enjoy peace).
    </p>
  `;
}

document.getElementById("start-btn").addEventListener("click", () => {
  // 25 unique movies per playthrough
  selectedMovies = shuffle(movieData).slice(0, 25);
  qIndex = 0;
  totalScore = 0;

  introEl.classList.add("hidden");
  resultsEl.classList.add("hidden");
  quizEl.classList.remove("hidden");

  loadQuestion();
});
</script>
</body>
</html>
