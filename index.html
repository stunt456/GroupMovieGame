<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Christmas Movie Zoom Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      background: linear-gradient(135deg, #2c3e50, #2980b9);
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      text-align: center;
    }
    h1 {
      font-family: 'Mountains of Christmas', cursive;
      font-size: 2.5em;
      margin: 0.2em 0;
    }
    #startScreen, #finalScreen {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      min-height: 100vh;
    }
    #startScreen.active, #finalScreen.active {
      display: flex;
    }
    #gameScreen {
      display: none;
      padding: 10px 5%;
    }
    #gameScreen.active {
      display: block;
    }
    #statusBar {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 1.1em;
    }
    #imageContainer {
      position: relative;
      margin: 10px auto;
      width: 80%;
      max-width: 600px;
      overflow: hidden;
    }
    #movieImage {
      width: 100%;
      height: auto;
      transform: scale(1);
      transform-origin: 50% 50%;
      transition: transform 0.5s ease;
    }
    #zoomButton {
      display: inline-block;
      margin: 10px 0;
      padding: 12px 20px;
      font-size: 1em;
      cursor: pointer;
      background: #17a2b8;
      color: #fff;
      border: none;
      border-radius: 5px;
    }
    #answers {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 10px 0;
    }
    @media (max-width: 500px) {
      #answers {
        grid-template-columns: 1fr;
      }
    }
    .answerBtn {
      padding: 10px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background: #ffc107;
      color: #000;
      text-align: center;
    }
    .answerBtn:hover:enabled {
      opacity: 0.8;
    }
    .answerBtn:disabled {
      opacity: 0.6;
      cursor: default;
    }
    .answerBtn.correct {
      background: #28a745;
      color: #fff;
    }
    .answerBtn.wrong {
      background: #dc3545;
      color: #fff;
    }
    .answerBtn.selected {
      outline: 3px solid #fff;
    }
    #feedback {
      margin-top: 10px;
      font-size: 1.2em;
    }
    #finalMessage {
      font-family: 'Mountains of Christmas', cursive;
      font-size: 2em;
      margin: 0.5em 0;
    }
    #playAgainBtn, #startButton {
      background: #ffc107;
      color: #000;
      font-size: 1.2em;
      padding: 15px 30px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
    }
    #playAgainBtn:hover, #startButton:hover {
      background: #e0a800;
    }
    #introText {
      max-width: 800px;
      text-align: left;
      margin: 1em auto;
      font-size: 1.1em;
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <!-- Start Screen -->
  <div id="startScreen" class="active">
    <h1>Christmas Movie Zoom Quiz</h1>
    <div id="introText">
      <p>Welcome to the Christmas Movie Zoom Quiz! In this game, you'll see a zoomed-in image from a Christmas movie. Your score for each movie starts at 10 points. If you need a hint, press the "Zoom Out" button to reveal more of the image (costs 1 point). Be careful: a wrong guess costs 2 points and also zooms the image out one level.</p>
      <p>You can make multiple guesses per image until you get it right or run out of points. If your points for an image reach 0, the image will be fully revealed and the answer shown. You get to play through 25 random movies. Try to score as high as possible (max 250 points)!</p>
      <p>Use the on-screen buttons or your keyboard (number keys 1-8 to select an answer, arrow keys to navigate options, Enter to submit). Good luck and have fun!</p>
    </div>
    <button id="startButton">Start Game</button>
  </div>
  <!-- Game Screen -->
  <div id="gameScreen">
    <div id="statusBar"></div>
    <div id="imageContainer">
      <img id="movieImage" src="" alt="Movie scene" />
    </div>
    <button id="zoomButton">üîç Zoom Out (-1 Point)</button>
    <div id="answers"></div>
    <div id="feedback"></div>
  </div>
  <!-- Final Score Screen -->
  <div id="finalScreen">
    <h1 id="finalMessage"></h1>
    <div id="finalScore"></div>
    <button id="playAgainBtn">Play Again</button>
  </div>
  <script>
    // Movie data: 50 Christmas movies with title, year, and image URL
    const movies = [
      {
        "title": "Elf",
        "year": 2003,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a0.png"
      },
      {
        "title": "Home Alone 2: Lost in New York",
        "year": 1992,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a1.png"
      },
      {
        "title": "Rudolph The Red-Nosed Reindeer",
        "year": 1964,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a2.png"
      },
      {
        "title": "A Christmas Story",
        "year": 1983,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a3.png"
      },
      {
        "title": "Nightmare Before Christmas",
        "year": 1993,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a4.png"
      },
      {
        "title": "The Santa Clause",
        "year": 1994,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a5.png"
      },
      {
        "title": "Frosty the Snowman",
        "year": 1969,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a6.png"
      },
      {
        "title": "The Year Without a Santa Claus",
        "year": 1974,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a7.png"
      },
      {
        "title": "Jack Frost",
        "year": 1998,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a8.png"
      },
      {
        "title": "White Christmas",
        "year": 1954,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/a9.png"
      },
      {
        "title": "Jingle All the Way",
        "year": 1996,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b0.png"
      },
      {
        "title": "Prancer",
        "year": 1989,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b1.png"
      },
      {
        "title": "Scrooged",
        "year": 1988,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b2.png"
      },
      {
        "title": "Christmas with the Kranks",
        "year": 2004,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b3.png"
      },
      {
        "title": "Deck the Halls",
        "year": 2006,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b4.png"
      },
      {
        "title": "Just Friends",
        "year": 2005,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b5.png"
      },
      {
        "title": "Ernest Saves Christmas",
        "year": 1988,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b6.png"
      },
      {
        "title": "Mr. Magoo's Christmas Carol",
        "year": 1962,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b7.png"
      },
      {
        "title": "It's A Wonderful Life",
        "year": 1946,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b8.png"
      },
      {
        "title": "National Lampoon's Christmas Vacation",
        "year": 1989,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/b9.png"
      },
      {
        "title": "Miracle on 34th Street",
        "year": 1994,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c0.png"
      },
      {
        "title": "How the Grinch Stole Christmas",
        "year": 2000,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c1.png"
      },
      {
        "title": "A Charlie Brown Christmas",
        "year": 1965,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c2.png"
      },
      {
        "title": "Santa Claus is Coming to Town",
        "year": 1970,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c3.png"
      },
      {
        "title": "Batman Returns",
        "year": 1992,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c4.png"
      },
      {
        "title": "The Muppet Christmas Carol",
        "year": 1992,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c5.png"
      },
      {
        "title": "The Holiday",
        "year": 2006,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c6.png"
      },
      {
        "title": "Home Alone",
        "year": 1990,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c7.png"
      },
      {
        "title": "The Small One",
        "year": 1978,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c8.png"
      },
      {
        "title": "Mickey's Once Upon a Christmas",
        "year": 1999,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/c9.png"
      },
      {
        "title": "Die Hard",
        "year": 1988,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d0.png"
      },
      {
        "title": "Gremlins",
        "year": 1984,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d1.png"
      },
      {
        "title": "Bad Santa",
        "year": 2003,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d2.png"
      },
      {
        "title": "Edward Scissorhands",
        "year": 1990,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d3.png"
      },
      {
        "title": "Polar Express",
        "year": 2004,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d4.png"
      },
      {
        "title": "Love Actually",
        "year": 2003,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d5.png"
      },
      {
        "title": "8-Bit Christmas",
        "year": 2021,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d6.png"
      },
      {
        "title": "The Christmas Chronicles",
        "year": 2018,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d7.png"
      },
      {
        "title": "The Little Drummer Boy",
        "year": 1968,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d8.png"
      },
      {
        "title": "Holiday Affair",
        "year": 1949,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/d9.png"
      },
      {
        "title": "A Very Harold & Kumar Christmas",
        "year": 2011,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e0.png"
      },
      {
        "title": "A Boy Called Christmas",
        "year": 2021,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e1.png"
      },
      {
        "title": "Red One",
        "year": 2024,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e2.png"
      },
      {
        "title": "I'll Be Home for Christmas",
        "year": 1998,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e3.png"
      },
      {
        "title": "The Christmas Shoes",
        "year": 2002,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e4.png"
      },
      {
        "title": "Trading Places",
        "year": 1983,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e5.png"
      },
      {
        "title": "While You Were Sleeping",
        "year": 1995,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e6.png"
      },
      {
        "title": "Spirited",
        "year": 2022,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e7.png"
      },
      {
        "title": "Santa Buddies",
        "year": 2009,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e8.png"
      },
      {
        "title": "Fred Claus",
        "year": 2007,
        "image": "https://raw.githubusercontent.com/stunt456/GroupMovieGame/main/e9.png"
      }
    ];
    // Additional decoy movie titles not in the main list
    const extraTitles = ["Frozen", "Klaus", "The Grinch", "Krampus", "Arthur Christmas"];
    let selectedIndices = [];
    let currentQuestion = 0;
    let currentMovie = null;
    let currentPoints = 10;
    let totalScore = 0;
    let zoomLevel = 0;
    let quizActive = false;
    let selectionIndex = -1;
    
    // Shuffle array utility
    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }
    
    // Zoom state definitions (scale and origin for each zoom level 0-10)
    const zoomStates = [
		{ scale: 1.0, origin: '50% 50%' },   // 0: fully revealed
		{ scale: 1.18, origin: '50% 50%' },  // 1
		{ scale: 1.51, origin: '50% 50%' },  // 2
		{ scale: 1.89, origin: '100% 50%' }, // 3
		{ scale: 2.17, origin: '0% 50%' },   // 4
		{ scale: 2.55, origin: '50% 100%' }, // 5
		{ scale: 2.93, origin: '50% 0%' },   // 6
		{ scale: 3.30, origin: '0% 100%' },  // 7
		{ scale: 3.69, origin: '100% 100%' },// 8
		{ scale: 3.95, origin: '100% 0%' },  // 9
		{ scale: 4.05, origin: '0% 0%' }      // 10: most zoomed-in (initial)
    ];
    
    // Initialize a new quiz
    function startGame() {
      // Reset state
      totalScore = 0;
      currentQuestion = 0;
      selectedIndices = [...Array(movies.length).keys()];
      shuffleArray(selectedIndices);
      selectedIndices = selectedIndices.slice(0, 25);
      // Prepare UI for game
      document.getElementById('startScreen').classList.remove('active');
      document.getElementById('finalScreen').classList.remove('active');
      document.getElementById('gameScreen').classList.add('active');
      quizActive = true;
      // Start first question
      showQuestion(0);
    }
    
    function showQuestion(index) {
      currentQuestion = index;
      currentPoints = 10;
      zoomLevel = 10; // start at most zoomed-in level (index 10 in zoomStates)
      const movieIndex = selectedIndices[index];
      currentMovie = movies[movieIndex];
      // Update status bar
      document.getElementById('statusBar').textContent = `Question ${index+1}/25 | Points: ${currentPoints} | Score: ${totalScore}`;
      // Set image and initial zoom
      const img = document.getElementById('movieImage');
      img.src = currentMovie.image;
      // Apply initial zoom state (most zoomed-in)
      img.style.transformOrigin = zoomStates[zoomLevel].origin;
      img.style.transform = `scale(${zoomStates[zoomLevel].scale})`;
      // Enable zoom button
      const zoomBtn = document.getElementById('zoomButton');
      zoomBtn.disabled = false;
      // Build answer options
      const answersDiv = document.getElementById('answers');
      answersDiv.innerHTML = '';
      // Prepare the answer list (one correct + 7 decoys)
      let options = [];
      // take all other titles except current
      const otherTitles = movies.map(m => m.title).filter(t => t !== currentMovie.title);
      // possibly include extras in decoys pool
      const decoyPool = otherTitles.concat(extraTitles);
      shuffleArray(decoyPool);
      options = decoyPool.slice(0, 7);
      // ensure no duplicate with correct just in case
      options.push(currentMovie.title);
      shuffleArray(options);
      // Create answer buttons
      options.forEach(title => {
        const btn = document.createElement('button');
        btn.textContent = title;
        btn.className = 'answerBtn';
        btn.disabled = false;
        // Click handler for answer
        btn.addEventListener('click', () => { selectAnswer(btn); });
        answersDiv.appendChild(btn);
      });
      // Reset feedback message
      const feedback = document.getElementById('feedback');
      feedback.textContent = '';
      feedback.style.display = 'none';
      // Reset selection index for keyboard nav
      selectionIndex = -1;
      updateSelectionHighlight();
    }
    
    function selectAnswer(button) {
      if (!quizActive) return;
      const guess = button.textContent;
      const answersButtons = document.querySelectorAll('.answerBtn');
      // Disable all answers temporarily to prevent multiple clicks
      answersButtons.forEach(btn => btn.disabled = true);
      if (guess === currentMovie.title) {
        // Correct answer
        button.classList.add('correct');
        // Add current points to total score
        totalScore += currentPoints;
        // Show full image
        revealFullImage();
        // Haptic feedback for correct (vibrate if supported)
        if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
        // Show feedback message
        const feedback = document.getElementById('feedback');
        feedback.style.display = 'block';
        feedback.textContent = '‚úÖ Correct! Next image in 5...';
        // Proceed to next question after countdown
        nextQuestionAfterDelay();
      } else {
        // Wrong answer
        button.classList.add('wrong');
        // Haptic feedback for wrong (vibrate if supported)
        if (navigator.vibrate) navigator.vibrate(300);
        // Deduct 2 points
        currentPoints -= 2;
        if (currentPoints < 0) currentPoints = 0;
        // Update status bar
        document.getElementById('statusBar').textContent = `Question ${currentQuestion+1}/25 | Points: ${currentPoints} | Score: ${totalScore}`;
        if (currentPoints <= 0) {
          // Out of points - reveal answer
          revealFullImage();
          // Highlight correct answer
          answersButtons.forEach(btn => {
            if (btn.textContent === currentMovie.title) {
              btn.classList.add('correct');
            }
          });
          // Show feedback with correct title
          const feedback = document.getElementById('feedback');
          feedback.style.display = 'block';
          feedback.textContent = `‚ùå Out of points! The correct answer was "${currentMovie.title}". Next image in 5...`;
          // Next question after short delay
          nextQuestionAfterDelay();
        } else {
          // Still have points, reveal one more level
          zoomLevel = Math.max(0, zoomLevel - 1);
          const img = document.getElementById('movieImage');
          img.style.transformOrigin = zoomStates[zoomLevel].origin;
          img.style.transform = `scale(${zoomStates[zoomLevel].scale})`;
          // Re-enable unanswered buttons after short delay
          setTimeout(() => {
            answersButtons.forEach(btn => {
              if (!btn.classList.contains('wrong') && !btn.classList.contains('correct')) {
                btn.disabled = false;
              }
            });
          }, 500);
        }
      }
    }
    
    function revealFullImage() {
      // Set image to fully revealed state
      zoomLevel = 0;
      const img = document.getElementById('movieImage');
      img.style.transformOrigin = zoomStates[0].origin;
      img.style.transform = `scale(${zoomStates[0].scale})`;
      // Disable zoom out button
      document.getElementById('zoomButton').disabled = true;
      // Disable all answer buttons
      document.querySelectorAll('.answerBtn').forEach(btn => btn.disabled = true);
    }
    
    function nextQuestionAfterDelay() {
      // Countdown 5 seconds then next question or end game
      let countdown = 5;
      const feedback = document.getElementById('feedback');
      const timer = setInterval(() => {
        countdown--;
        if (feedback.textContent) {
          feedback.textContent = feedback.textContent.replace(/\d+/, countdown);
        }
        if (countdown <= 0) {
          clearInterval(timer);
          // Next question or end game
          if (currentQuestion < 24) {
            showQuestion(currentQuestion + 1);
          } else {
            endGame();
          }
        }
      }, 1000);
    }
    
    function endGame() {
      quizActive = false;
      // Hide game screen, show final screen
      document.getElementById('gameScreen').classList.remove('active');
      document.getElementById('finalScreen').classList.add('active');
      // Display final score message
      document.getElementById('finalMessage').innerHTML = `üéÑ Merry Christmas! üéÑ<br>You scored ${totalScore} out of 250 points!`;
    }
    
    // Event listeners for buttons
    document.getElementById('startButton').addEventListener('click', startGame);
    document.getElementById('playAgainBtn').addEventListener('click', startGame);
    document.getElementById('zoomButton').addEventListener('click', () => {
      if (!quizActive) return;
      // Zoom out action
      currentPoints -= 1;
      if (currentPoints < 0) currentPoints = 0;
      // Update status bar
      document.getElementById('statusBar').textContent = `Question ${currentQuestion+1}/25 | Points: ${currentPoints} | Score: ${totalScore}`;
      zoomLevel = Math.max(0, zoomLevel - 1);
      const img = document.getElementById('movieImage');
      img.style.transformOrigin = zoomStates[zoomLevel].origin;
      img.style.transform = `scale(${zoomStates[zoomLevel].scale})`;
      if (currentPoints <= 0) {
        // Reveal answer when points drop to 0
        document.querySelectorAll('.answerBtn').forEach(btn => {
          if (btn.textContent === currentMovie.title) {
            btn.classList.add('correct');
          } else {
            btn.disabled = true;
          }
        });
        revealFullImage();
        const feedback = document.getElementById('feedback');
        feedback.style.display = 'block';
        feedback.textContent = `‚ùå Out of points! The correct answer was "${currentMovie.title}". Next image in 5...`;
        nextQuestionAfterDelay();
      }
    });
    
    // Keyboard navigation and shortcuts
    document.addEventListener('keydown', (e) => {
      if (!quizActive) {
        // On start screen, allow Enter to start
        if (document.getElementById('startScreen').classList.contains('active') && e.key === 'Enter') {
          startGame();
          return;
        }
        // On final screen, allow Enter to play again
        if (document.getElementById('finalScreen').classList.contains('active') && e.key === 'Enter') {
          startGame();
          return;
        }
        return;
      }
      const answerButtons = document.querySelectorAll('.answerBtn');
      if (e.key >= '1' && e.key <= '8') {
        // Number key pressed: select corresponding answer
        const idx = parseInt(e.key, 10) - 1;
        if (idx < answerButtons.length) {
          answerButtons[idx].click();
        }
      } else if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
        // Move selection down/right
        if (selectionIndex === -1) {
          selectionIndex = 0;
        } else {
          let newIndex = selectionIndex;
          do {
            newIndex = (newIndex + 1) % answerButtons.length;
          } while (answerButtons[newIndex].disabled);
          selectionIndex = newIndex;
        }
        updateSelectionHighlight();
      } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
        // Move selection up/left
        if (selectionIndex === -1) {
          selectionIndex = 0;
        } else {
          let newIndex = selectionIndex;
          do {
            newIndex = (newIndex - 1 + answerButtons.length) % answerButtons.length;
          } while (answerButtons[newIndex].disabled);
          selectionIndex = newIndex;
        }
        updateSelectionHighlight();
      } else if (e.key === 'Enter') {
        // Press Enter to confirm highlighted answer
        if (selectionIndex >= 0 && selectionIndex < answerButtons.length) {
          answerButtons[selectionIndex].click();
        }
      }
    });
    
    function updateSelectionHighlight() {
      const answerButtons = document.querySelectorAll('.answerBtn');
      answerButtons.forEach((btn, i) => {
        if (i === selectionIndex) {
          btn.classList.add('selected');
        } else {
          btn.classList.remove('selected');
        }
      });
    }
    
    // Start screen is shown by default on page load.
  </script>
</body>
</html>
